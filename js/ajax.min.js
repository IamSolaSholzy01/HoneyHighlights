function signOut(){var e=gapi.auth2.getAuthInstance();e.signOut().then(function(){})}function onLoad(){gapi.load("auth2",function(){gapi.auth2.init()})}function onSignIn(e){var t=document.getElementById("google").value,s=e.getBasicProfile();sessionStorage.setItem("id",s.getId()),sessionStorage.setItem("username",s.getName()),sessionStorage.setItem("email",s.getEmail()),$.ajax({type:"POST",url:t,dataType:"JSON",data:{username:s.getName(),email:s.getEmail(),id:s.getId()},success:function(e){"success"==e.feedback&&($("#reply").html("Login Successful"),$("#reply").css("color","green"),$(".error").removeClass("alert alert-danger"),$(".error").addClass("alert alert-success"),$("#loginLink").css("display","none"),$("#logoutLink").css("display","block"),setTimeout(()=>{$("#loginemail").val(""),$("#loginpassword").val(""),$("#reply").text(""),$(".error").removeClass("alert alert-success"),$("#loginLink").css("display","none"),$("#logoutLink").css("display","block"),closeModal()},3e3))},error:function(){}})}var isLoggedIn,subscribe=function(){var e=$(".subscribe-form");e.submit(function(t){return url=e.attr("action"),type=e.attr("method"),data={},e.find("[name]").each(function(){var e=$(this),t=e.attr("name"),s=e.val();data[t]=s}),$.ajax({type:type,url:url,dataType:"JSON",data:data,success:function(e){$("#subscribe-form").css("display","none"),$("#subscribe-result").html(e.content),$("#subscribe-result").css("display","block")},error:function(e){$("#subscribe-result").html(e.email)}}),!1})},contact_request=function(){var e=$("#contact-form");e.submit(function(t){return url=e.attr("action"),type=e.attr("method"),data={},e.find("[name]").each(function(){var e=$(this),t=e.attr("name"),s=e.val();data[t]=s}),$.ajax({type:type,url:url,dataType:"JSON",data:data,success:function(e){console.log(e),"success"==e.id?($(".contact-result").html(e.content),$(".contact-result").css("display","block"),$(".contact-result").addClass("alert alert-success"),$(".contact-result").css("color","green"),$(".contact-result").addClass("alert alert-success"),setTimeout(()=>{$("#name").val(""),$("#email").val(""),$("#text").val(""),$("#message").val(""),$(".contact-result").val(""),$(".contact-result").removeClass("alert alert-success"),$(".contact-result").css("display","none")},3e3)):$(".contact-result").html(e.content)},error:function(e){console.log(e),$(".contact-result").html(e.content),$(".contact-result").css("display","block")}}),!1})},register=function(){var e=$(".registrationform");e.submit(function(t){return url=e.attr("action"),type=e.attr("method"),data={},e.find("[name]").each(function(){var e=$(this),t=e.attr("name"),s=e.val();data[t]=s}),$.ajax({type:type,url:url,dataType:"JSON",data:data,success:function(e){"duplicateName"==e.id?(shakeModal(),$("#response").html(e.content),$(".error").addClass("alert alert-danger"),setTimeout(()=>{$("#username").val(""),$("#regpassword").val(""),$("passwordconfirmation").val("")},3e3)):"duplicateEmail"==e.id?(shakeModal(),$("#response").html(e.content),$("#response").css("color","red"),$(".error").addClass("alert alert-danger"),setTimeout(()=>{$("#username").val(""),$("#regemail").val(""),$("#regpassword").val(""),$("#firstname").val(""),$("#surname").val(""),$("#passwordconfirmation").val(""),$("#response").val("")},3e3)):"success"==e.id&&($("#response").html(e.content),$("#response").css("color","green"),$(".error").addClass("alert alert-success"),setTimeout(()=>{$("#regemail").val(""),$("#regpassword").val(""),$("#firstname").val(""),$("#surname").val(""),$("#passwordconfirmation").val(""),$("#response").val(""),$(".error").removeClass("alert alert-success"),showLoginForm()},3e3)),$("input:submit").removeAttr("disabled")},error:function(){$("#response").text("Serious error"),shakeModal(),$("input:submit").removeAttr("disabled")}}),!1})},login=function(){var e=$(".logform");e.submit(function(t){return url=e.attr("action"),type=e.attr("method"),data={},e.find("[name]").each(function(){var e=$(this),t=e.attr("name"),s=e.val();data[t]=s}),$.ajax({type:type,url:url,dataType:"JSON",data:data,success:function(e){"error"==e.id?($("#reply").html(e.content),$("#reply").css("color","red"),$(".error").addClass("alert alert-danger"),shakeModal(),setTimeout(()=>{$("#loginemail").val(""),$("#loginpassword").val("")},3e3)):"emailerror"==e.id?($("#reply").html(e.content),$("#reply").css("color","red"),$(".error").addClass("alert alert-danger"),shakeModal(),setTimeout(()=>{$("#loginemail").val(""),$("#loginpassword").val("")},3e3)):e&&(sessionStorage.setItem("id",e.id),sessionStorage.setItem("username",e.username),sessionStorage.setItem("email",e.email),sessionStorage.setItem("firstname",e.firstname),$("#reply").html("Login Successful"),$("#reply").css("color","green"),$(".error").removeClass("alert alert-danger"),$(".error").addClass("alert alert-success"),$("#loginLink").css("display","none"),$("#logoutLink").css("display","block"),setTimeout(()=>{$("#loginemail").val(""),$("#loginpassword").val(""),$("#reply").text(""),$(".error").removeClass("alert alert-success"),$("#loginLink").css("display","none"),$("#logoutLink").css("display","block"),closeModal()},3e3)),$("input:submit").removeAttr("disabled")},error:function(e){$("#reply").text("Serious error"),$(".error").addClass("alert alert-danger"),shakeModal(),$("input:submit").removeAttr("disabled")}}),!1})},setAsLoggedIn=function(){isLoggedIn=!0},setAsLoggedOut=function(){isLoggedIn=!1,sessionStorage.clear()},toggleLoginLogout=function(){var e=document.getElementById("loginLink"),t=document.getElementById("logoutLink");e.style.display="none",t.style.display="block"},logout=function(){null!=sessionStorage.getItem("email")?toggleLoginLogout():null==sessionStorage.getItem("email")&&($("#loginLink").css("display","block"),$("#logoutLink").css("display","none"))},postComment=function(){var e=$("#ajax-form");e.submit(function(t){return url=e.attr("action"),type=e.attr("method"),data={},e.find("[name]").each(function(){var e=$(this),t=e.attr("name"),s=e.val();data[t]=s}),$.ajax({type:type,url:url,dataType:"JSON",data:data,success:function(e){"success"==e.feedback&&($(".response").text("Your comment has been sent"),$(".response").css("color","green"),$(".response").addClass("alert alert-success"),setTimeout(()=>{$("#name").val(""),$("#email").val(""),$("#message").val(""),$(".response").text(""),$(".response").removeClass("alert alert-success"),runn()},3e3)),$("input:submit").removeAttr("disabled")},error:function(){$(".response").text("Big error"),$(".response").addClass("alert alert-danger"),$("input:submit").removeAttr("disabled")}}),!1})},runn=function(){url="../php/load-comments.php",type="POST";var e=$("#post_id").val();return $.ajax({type:type,url:url,dataType:"JSON",data:{post_id:e},success:function(e){if("error"==e.id)$(".commentnum").html("0"),$("#empty").html(e.content);else{$("#empty").html("");var t=0;$.each(e,function(){t++;var e=$("body").find("#honey-comments > li").clone();e.find(".honey-comment-name").append(this.name),e.find(".honey-comment-body").append(this.body),e.find(".honey-comment-time").append(this.created_at),e.find(".honey-reply-icon").addClass(this.comment_id),e.find(".honey-reply-icon").attr("id",this.comment_id),$(e).appendTo("#honey-comments-list")}),$(".commentnum").html(t),$("input:submit").removeAttr("disabled")}},error:function(e){$(".response").text("Big error"),$(".response").addClass("alert alert-danger"),$("input:submit").removeAttr("disabled")}}),!1},loadData=function(){var e=$("#post_id").val();return url="../php/load-data.php",type="POST",$.ajax({type:type,url:url,dataType:"JSON",data:{post_id:e},success:function(e){$("#post_author").html(e.author),$("#post_date").html(e.created_at)},error:function(e){$("input:submit").removeAttr("disabled")}}),!1},runner=function(){url="../php/load-reply.php",type="POST";var e=document.getElementById("post_id").value;$.ajax({type:type,url:url,dataType:"JSON",data:{post_id:e},success:function(e){"error"==e.id?$(".honey-reply-body").html(""):$.each(e,function(){var e=this,t=this.comment_id;$("#honey-comments-list").find(".honey-reply-icon").each(function(){var s=$(this).attr("id");if(t===s){var a=$("body").find("#honey-comments .honey-reply-box").clone();a.find(".honey-reply-name").append(e.name),a.find(".honey-reply-body").append(e.body),$("#"+s).closest(".honey-comment-box").find("#reply-div").css("display","block"),$(a).appendTo($("#"+s).closest(".honey-comment-box").find("#reply-div"))}})})},error:function(){$(".response").text("Big error"),$(".response").addClass("alert alert-danger"),$("input:submit").removeAttr("disabled")}})},postreply=function(){var e=document.getElementById("hidden-id").value,t=document.getElementById("post_id").value;$("#"+e).closest(".honey-comment-box").find("#reply-div").slideToggle();var s=$("#"+e).closest(".honey-comment-box").find(".reply-input").val();return url="../php/postreply.php",type="POST",$.ajax({type:type,url:url,dataType:"JSON",data:{post_id:t,comment_id:e,text:s},success:function(t){$("#"+e).closest(".honey-comment-box").find(".reply-input").val(""),"1"==t.id?(alert("Please LOG IN to Reply"),openLoginModal()):"success"==t.feedback&&runner(),$("input:submit").removeAttr("disabled")},error:function(e){e.id,alert("Please LOG IN to Reply"),openLoginModal(),$("input:submit").removeAttr("disabled")}}),!1},replyclicked=function(e){document.getElementById("hidden-id").value=e,$("#"+e).closest(".honey-comment-box").find("#reply-input").slideToggle()},showreply=function(e){$(e).closest(".honey-comment-box").find("#reply-div").slideToggle()},reaction=function(e){var t=e.id,s=document.getElementById("post_id").value;url="../php/reaction.php",type="POST",$.ajax({type:type,url:url,dataType:"JSON",data:{post_id:s,reaction:t},success:function(e){"success"==e.id&&"like"==t?($("#thumbup").html(e.likes),$("#like").css("color","blue"),$("#thumbdown").html(e.dislikes)):"success"==e.id&&"dislike"==t&&($("#thumbup").html(e.likes),$("#dislike").css("color","red"),$("#thumbdown").html(e.dislikes)),$("input:submit").removeAttr("disabled")},error:function(e){$("input:submit").removeAttr("disabled")}}),"like"==e.id||e.id},loadreaction=function(){var e=document.getElementById("post_id").value;url="../php/load-reaction.php",type="POST",$.ajax({type:type,url:url,dataType:"JSON",data:{post_id:e},success:function(e){"success"==e.id&&($("#thumbup").html(e.likes),$("#thumbdown").html(e.dislikes)),$("input:submit").removeAttr("disabled")},error:function(e){$("input:submit").removeAttr("disabled")}})},share=function(){$(".sharethis-inline-share-buttons").toggle()};